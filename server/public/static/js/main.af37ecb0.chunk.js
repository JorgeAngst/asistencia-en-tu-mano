(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(18),i=n.n(s),c=(n(66),n(3)),o=n(5),l=n(7),u=n(6),m=n(8),d=(n(67),n(31)),p=n.n(d),h=function e(){var t=this;Object(c.a)(this,e),this.getAllRecoveryServices=function(){return t.service.get("getAllRecoveryServices").then(function(e){return e.data}).catch(function(e){return console.log("Error",e)})},this.postUserLocation=function(e,n,a){return t.service.post("postLocation",{lat:e,lng:n,pickupId:a}).then(function(e){return e.data}).catch(function(e){return console.log(e)})},this.getServiceInfo=function(){return t.service.get("services").then(function(e){return e.data}).catch(function(e){return console.log("Error",e)})},this.service=p.a.create({baseURL:"https://asistencia-en-tu-mano.herokuapp.com/",withCredentials:!0})},g=n(23),v=n(57),f=n.n(v),E=n(30),b=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).infoWindowRef=r.a.createRef(),n.onInfoWindowOpen=n.onInfoWindowOpen.bind(Object(E.a)(n)),n.containerElement||(n.containerElement=document.createElement("div")),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onInfoWindowOpen",value:function(){i.a.render(r.a.Children.only(this.props.children),this.containerElement),this.infoWindowRef.current.infowindow.setContent(this.containerElement)}},{key:"render",value:function(){return r.a.createElement(g.InfoWindow,Object.assign({onOpen:this.onInfoWindowOpen,ref:this.infoWindowRef},this.props))}}]),t}(a.Component),k=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onMarkerClick=function(e,t,a){return n.setState({pickupInfo:e,activeMarker:t,showingInfoWindow:!0})},n.sendPickUpInfo=function(){n.service.postUserLocation(n.state.pickupInfo.user.lat,n.state.pickupInfo.user.lng,n.state.pickupInfo.id).then(function(e){return console.log(e)}),console.log("********************** Send pick up info")},n.state={showingInfoWindow:!1,activeMarker:{},pickupInfo:{},center:{lat:void 0,lng:void 0},zoom:14,markers:[{username:void 0,latitude:void 0,longitude:void 0}]},n.service=new h,n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition(function(t){var n={lat:t.coords.latitude,lng:t.coords.longitude};e.setState({center:n})})}},{key:"render",value:function(){var e=this,t=this.props.pickups.map(function(e){return{latitude:e.location.latitude,longitude:e.location.longitude,username:e.username,id:e._id}});return r.a.createElement(g.Map,{style:{height:"100vh",width:"100%"},google:this.props.google,center:this.state.center,zoom:this.state.zoom},r.a.createElement(g.Marker,{name:"Your position",position:this.state.center,icon:{url:f.a}}),t.length&&t.map(function(t,n){return r.a.createElement(g.Marker,{onClick:e.onMarkerClick,key:n,position:{lat:t.latitude,lng:t.longitude},name:t.username,id:t.id,user:e.state.center,icon:"https://img.icons8.com/doodle/48/000000/crane.png"})}),r.a.createElement(b,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{className:"infoWindowText"},r.a.createElement("h1",null,this.state.pickupInfo.name," "),r.a.createElement("button",{onClick:this.sendPickUpInfo},"Enviar"))))}}]),t}(a.Component),O=Object(g.GoogleApiWrapper)({apiKey:"AIzaSyAy2xN5p2elDvSArycSMEQOOPyKXzwpevk"})(k),A=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={pickups:[]},n.services=new h,n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.services.getAllRecoveryServices().then(function(t){return e.setState({pickups:t})})}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100vh",width:"100%"}},r.a.createElement(O,{pickups:this.state.pickups}))}}]),t}(a.Component),I=n(14),w=n(24),j=n.n(w),C=n(1),N=n.n(C),S=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e,n){return t.service.post("/signup",{username:e,password:n}).then(function(e){return e.data})},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/loggedin").then(function(e){return e.data})},this.service=p.a.create({baseURL:"https://asistencia-en-tu-mano.herokuapp.com/auth",withCredentials:!0})},U=n(27),y=n.n(U),L=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).logout=function(){console.log("hola"),n.service.logout().then(function(e){console.log("contigo pipo"),n.props.setTheUser(null)})},n.service=new S,n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return console.log(this.props),this.props.userInSession?r.a.createElement(j.a,{expand:"md",bg:"dark",variant:"dark",className:"justify-content-end navigation"},r.a.createElement(j.a.Toggle,null),r.a.createElement(j.a.Collapse,{className:"justify-content-end"},r.a.createElement(N.a,null,r.a.createElement(N.a.Item,{className:"nav-links"},r.a.createElement(N.a.Link,{as:"div"},r.a.createElement("img",{src:y.a,alt:"logo",className:"logoNav"}))),r.a.createElement("section",null,r.a.createElement(N.a.Item,null,r.a.createElement(N.a.Link,{as:"div"},"\xa1Hola ",this.props.userInSession.username,"!")),r.a.createElement(N.a.Item,null,r.a.createElement(N.a.Link,{as:"div"},r.a.createElement(I.b,{to:"/profile"},"Perfil"))),r.a.createElement(N.a.Item,null,r.a.createElement(N.a.Link,{as:"div"},r.a.createElement(I.b,{to:"/"},"Inicio"))),r.a.createElement(N.a.Item,null,r.a.createElement(N.a.Link,{as:"div"},r.a.createElement(I.b,{to:"/map"},"Mapa de asistencia"))),r.a.createElement(N.a.Item,null,r.a.createElement(N.a.Link,{as:"div"},r.a.createElement("div",{onClick:this.logout},"Cerrar sesi\xf3n"))))))):r.a.createElement(j.a,{expand:"md",bg:"dark",variant:"dark",className:"justify-content-end navigation"},r.a.createElement(j.a.Toggle,null),r.a.createElement(j.a.Collapse,{className:"justify-content-end"},r.a.createElement(N.a,null,r.a.createElement(N.a.Item,{className:"nav-links"},r.a.createElement(N.a.Link,{as:"div"},r.a.createElement("img",{src:y.a,alt:"logo",className:"logoNav"}))),r.a.createElement("section",null,r.a.createElement(N.a.Item,null,r.a.createElement(N.a.Link,{as:"div"},"\xa1Hola invitado!")),r.a.createElement(N.a.Item,null,r.a.createElement(N.a.Link,{as:"div"},r.a.createElement(I.b,{to:"/"},"Inicio"))),r.a.createElement(N.a.Item,null,r.a.createElement(N.a.Link,{as:"div"},r.a.createElement(I.b,{to:"/map"},"Mapa de asistencia"))),r.a.createElement(N.a.Item,null,r.a.createElement(N.a.Link,{as:"div"},r.a.createElement(I.b,{to:"/login"},"Iniciar sesi\xf3n"))),r.a.createElement(N.a.Item,null,r.a.createElement(N.a.Link,{as:"div"},r.a.createElement(I.b,{to:"/signup"},"Registrarse")))))))}}]),t}(a.Component),R=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("img",{src:y.a,alt:"logo",className:"logo"}))},W=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={services:[]},e.services=new h,e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.services.getServiceInfo().then(function(t){return e.setState({services:t})})}},{key:"render",value:function(){var e=this.state.services.map(function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,"Servicio de Asistencia"),r.a.createElement("hr",null),r.a.createElement("ul",null,r.a.createElement("li",null,"Matr\xedcula: ",e.userId.plateNumber),r.a.createElement("li",null,"Marca: ",e.userId.brand),r.a.createElement("li",null,"Modelo: ",e.userId.model),r.a.createElement("li",null,"Nombre Gr\xfaa: ",e.pickupId.username),r.a.createElement("li",null,"Tel\xe9fono: ",e.pickupId.phoneNumber),r.a.createElement("li",null,"Poblaci\xf3n:",e.pickupId.location.city)))});return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,this.props.loggedInUser.username),e)}}]),t}(a.Component),X=n(60),x=n(22),P=function(e){var t=e.component,n=e.user,a=Object(X.a)(e,["component","user"]);return r.a.createElement(x.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,Object.assign({},e,{loggedInUser:n})):r.a.createElement(x.a,{to:{pathname:"/"}})}}))},M=n(32),V=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(M.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.services.signup(a,r).then(function(e){n.setState({username:"",password:""}),n.props.setTheUser(e)}).catch(function(e){return console.log(e.response.data.message)})},n.state={username:"",password:""},n.services=new S,n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container login"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("h1",null,"Registrarse"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Usuario"),r.a.createElement("input",{onChange:this.handleChange,value:this.state.username,type:"text",className:"form-control",id:"username",name:"username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a"),r.a.createElement("input",{onChange:this.handleChange,value:this.state.password,type:"password",className:"form-control",id:"password",name:"password"})),r.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Enviar")))))}}]),t}(a.Component),T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(M.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.services.login(a,r).then(function(e){n.setState({username:"",password:""}),n.props.setTheUser(e)}).catch(function(e){return console.log(e)})},n.state={username:"",password:""},n.services=new S,n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container login"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("h1",null,"Iniciar sesi\xf3n"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Usuario"),r.a.createElement("input",{onChange:this.handleChange,value:this.state.username,type:"text",className:"form-control",id:"username",name:"username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a"),r.a.createElement("input",{onChange:this.handleChange,value:this.state.password,type:"password",className:"form-control",id:"password",name:"password"})),r.a.createElement("button",{type:"submit",className:"btn btn-dark"},"\xa1Acceder")))))}}]),t}(a.Component),z=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).setUser=function(e){return n.setState({loggedInUser:e})},n.fetchUser=function(){null===n.state.loggedInUser&&n.services.loggedin().then(function(e){return n.setState({loggedInUser:e})}).catch(function(e){return n.setState({loggedInUser:!1})})},n.state={loggedInUser:null},n.services=new S,n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser?r.a.createElement("div",null,r.a.createElement(L,{userInSession:this.state.loggedInUser,setTheUser:this.setUser}),r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/",exact:!0,component:R}),r.a.createElement(P,{path:"/profile",user:this.state.loggedInUser,component:W}),r.a.createElement(x.b,{path:"/map",exact:!0,render:function(){return r.a.createElement(A,{userInSession:e.state.loggedInUser})}}))):r.a.createElement("div",null,r.a.createElement(L,{userInSession:this.state.loggedInUser}),r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/",exact:!0,component:R}),r.a.createElement(P,{user:this.state.loggedInUser,path:"/profile",component:W}),r.a.createElement(x.b,{path:"/map",exact:!0,render:function(){return r.a.createElement(A,{userInSession:e.state.loggedInUser})}}),r.a.createElement(x.b,{path:"/signup",render:function(){return r.a.createElement(V,{setTheUser:e.setUser})}}),r.a.createElement(x.b,{path:"/login",render:function(){return r.a.createElement(T,{setTheUser:e.setUser})}})))}}]),t}(a.Component);i.a.render(r.a.createElement(I.a,null,r.a.createElement(z,null)),document.getElementById("root"))},27:function(e,t,n){e.exports=n.p+"static/media/Asistencia en tu mano.0101f84e.png"},57:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAA+xJREFUWIXFl91LHGcUh58zu05Wd21tSTS78Q+Qkg/B0tiaYO0HaLaUElJIof9DkpKr1qYNpKVXKQi9yUXIXQNtetW1BatN2kQlqSAl2RRyESG4iklcjB+7zuzM6YWuO+rsOqv9OLCw5z0fv+d95513ZoQq7En3K89ZRs0HiCYFaVXYCyAwreg4KinTtb/d/fPtZ0F7SpCkXzsJt8Re+0iRj0Xk+Uq5qjon6Jd/LQxf7LpBYccAk++07TaI/AByNAisB+V3l/zxfT+OPamUZVQKPuw81CAaGapeHECOikaGHnYeaqiUFa4UjMRiVxA54B1zXJdsfpl5y8JyXADMkEG9afJCZBchozQnETkQicWuAO+VxSwXyBzrOC6GXPOOLdo2U/OLOKq+NSER4rEoUbNm3bg67onET8PX/GrKXgIRPvX6ObvA5LOFNXFVzapq/+ovC+CoMjm/QM5ev/fEkN5yOr4Aj7oPH0SkdW0GqkwvLKIlv2/ezjZ3jaaTXaPp5LydbVbVPgCFlVzvKom0TncfPuin5bsHjFD4Da+/aNtYrltUv9o1mj7ljb87NrUEU6eut7/UiMhJy3VZtG1iprmW46z0/DPQCoC2eL0lz5KGXPnKvwYcT2xpw2UwNvSsCBDacNgUirMHCrfv3SsHYHhi3hoARXxvR18AV8mvS5LSzWK0tewpC+CJeWtWLRcYANWHXjcSLm0Vt0Y+LAfgjXlrVntOBAZwxRj2+vVmjefAkM9/a2/p3Fgz1N7SKchnsHK41G84Cwwxbvlp+R5Ef7S11ezbG3mESFNxbDaX5/FSrjibggtXRRkEUOFNA04iEgbYU1fLi7WRtX6qOpOZzje/PDZmBwIAyBw78okYXPA04fFSjmx+uVwJAA2RXTTW1SKePaAuvYn+m1/45Zc9CdXIfa2e6yYiNEbrSMSimKHNZWbIIBGL0hStWy+uOlGYLVwsp1PxcZxJvnpCJPTdJjhVLNfFcpxV8RCmYawTLuU67ydSI99vCwBgKtlxHZFNmy6Qqd6Ip269Ximl4vsAgKF6WlWd6rXVMVRPb9l/q4Sm/uFxES5XCyDC5ab+4fEdAwCw7Paq6lxgddU5lt2yj+CqAeIDIzNo6ZbcWp8L8YGRmX8MAGB2ItsH+iCA/IOV3GAWGGB/Om2J6tmt8kT17P502graN9B3gdcyySMDIrzlF1Pll0Tq5tvV9Au8AkUTnDOquumDQ1ULgnOm2n5VA8RTI3cFLm0G41I8NXL3XwcAcPLWOVWyRV+VrJO3zm2n17YAmgfvPFX0/BoAer558M7T/wwAILEQ/gb0Puj9lf//g2V6OnoyPR09O+nxN7M9nb5fYV6PAAAAAElFTkSuQmCC"},61:function(e,t,n){e.exports=n(132)},66:function(e,t,n){},67:function(e,t,n){}},[[61,1,2]]]);
//# sourceMappingURL=main.af37ecb0.chunk.js.map